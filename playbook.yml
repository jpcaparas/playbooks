---
- hosts: all

  vars:
    use_become: "{{ ansible_os_family != 'Darwin' }}"

  tasks:
    - name: Install common
      become: "{{ use_become }}"
      ansible.builtin.package:
        name:
          - git
          - vim
          - htop
          - xz-utils
          - golang
          - fail2ban
        state: present
